<style>
    .store_detail_description, #store_detail_left_content_container p{
        margin-top:15px;
        color: #6d6e71;
        font-family: lora-regular;
        /* font-family: neuton \9; */
        font-size: 14pt;
        line-height: 26pt;
    }
    
    .store_detail_content{
        margin-bottom:0;
    }
    .store_detail_content{
        margin-bottom:0;
        border-bottom:none;
        padding-bottom:0;
    }
    .socialize_div {
        margin-top:80px;
    }
    .socialize_text{
        margin-top:5px;
        
    }
    .socialize_social_icons{
        margin-top:0;
    }
    @media (max-width: 767px) {
        .hours_day, .hours_time {
            font-size:12pt;
        }    
    }
</style>
<div id="page_banner">
    <div class="banner_wrapper">
        <h1 class="page_headline"><span>Events</span> & Contests</h1>
        <p class="page_subtitle">See what's happening at The Bay Centre</p>
        <div class="missing_out_div">
            <p onclick="javascript:toggle_news_form()">Fear of missing out?<i id="fear_caret" class="fa fa-caret-down"></i></p>
            <div class="hidden_newsletter_form">
                <form style="font-size:12px" id="banner_newsletter">
                    <span>
                        <input id="banner_email" name="cm-iixuu-iixuu" type="email" required  placeholder="Email address"/>
                        <button type="submit" id="banner_submit">Subscribe</button>
                    </span>
                    <br>
                    <input id="banner_agree_terms" type="checkbox" required value="I agree to receive newsletters from The Bay Centre">
                    <label for="banner_aggree_terms" class="checkbox_lbl">I agree to receive newsletters from The Bay Centre</label>
                    <input type="hidden" name="cm-f-jhtykd" id ="banner_source" />
                    <input type="hidden" name="cm-f-jhtykh" id="banner_terms"/>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="share_this_icon_div">
    <span class='st_sharethis'></span>   
</div>

<div id="main_container">
    <div id="page_content"> 
        <div class="store_detail_content">
            <div class="detail_left_div" id="promo_title_container">
                <script id="promo_title_template" type="x-tmpl-mustache/text">
                    <div>
                        <button class="gray_pill back_to_list" onclick="window.location.href='/events'" id="view_all_btn">View All Contests</button>
                        <p class="store_detail_title">{{name}}</p>
                    </div>
                    <div id="store_detail_left_content_container">
                        <p class="store_detail_description">{{{rich_description}}}</p>
                    </div>
                </script>
            </div>
            <div class="detail_right_div">
                <div id="store_detail_right_content_container">
                    <script id="store_detail_right_content_template" type="x-tmpl-mustache/text">
                        <a href="{{alt_store_front_url}}" rel="lightbox-gallery" title="{{name}}">
                            <img class="store_front" alt="photo_{{name}}" src="https://mallmaverick.com/{{photo_url}}"/>
                        </a>
                    </script>
                </div>
            </div>
        </div>
    </div>
</div>

<!--For more information please see https://learnjs.io/blog/2013/11/30/snapsvg-resources/-->
<script src="//cdnjs.cloudflare.com/ajax/libs/snap.svg/0.3.0/snap.svg-min.js"></script>
<script src="https://kodekloud.s3.amazonaws.com/sites/5422419e4a616d74d9030000/e1fb5e17ab727d248230fbcb51da868f/jquery.panzoom.min.js"></script>

<script>
    $(document).ready(function() {
        function renderPageData(){
            var pathArray = window.location.pathname.split( '/' );
            var slug = pathArray[pathArray.length-1];
            contest_details = getContestBySlug(slug);
            
            var page_banner = getRepoDetailsByName('Events & Contests').images;
            var banner_url = "";
            $.each(page_banner, function(key, val){
                banner_url = val.photo_url_abs;
            });
            $("#page_banner").css({backgroundImage: "url(" + banner_url + ")"});
            
            renderDetailData("#promo_title_container", "#promo_title_template", contest_details, "contest")
            renderDetailData("#store_detail_right_content_container", "#store_detail_right_content_template", contest_details, "contest")
            $.getScript("https://cdn.jsdelivr.net/slimbox/2.0.5/js/slimbox2.js");
            $('head').append('<link rel="stylesheet" href="https://cdn.jsdelivr.net/slimbox/2.0.5/css/slimbox2.css" type="text/css" media="screen" />');
            $(".loading_overlay").hide();
            $("#page_content").show();
            // load_slider("flexslider4");
        }

        function renderDetailData(container, template, collection, type){
            var item_list = [];
            var item_rendered = [];
            var template_html = $(template).html();
            Mustache.parse(template_html);   // optional, speeds up future uses
            item_list.push(collection);    
            collection = item_list;    
            $.each( collection , function( key, val ) {
                // if ((val.photo_url).indexOf('missing.png') > 0){
                //     val.photo_url = "//codecloud.cdn.speedyrails.net/sites/5639075d6e6f647b9f020000/image/jpeg/1453749449000/TheBayCentre (1).jpg"
                // }
                var rendered = Mustache.render(template_html,val);
                item_rendered.push(rendered);

                $(container).show();
                $(container).html(item_rendered.join(''));
            });
        }
        loadMallDataCached(renderPageData);
    });
</script>