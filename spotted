<script src="//s3.amazonaws.com/kodekloud/sites/5639075d6e6f647b9f020000/application/x-javascript/1450056030000/lightbox.js"></script>
<style>
    .row{
    }
    .col-md-3{
        float:left;
        width:calc(25% - 20px);
        margin:10px;
    }
    .thumbnail{
        display: block;
        padding: 10px;
        border: 1px solid #ccc;
    }
    .width_100{
        width:100%;
    }
    .clearfix{
        clear:both;
    }
</style>

<h3 class="contact_title">Spotted</h3>
<p class="contact_number">
    Great personal style stands out from the crowd. Our roving fashion-watchers make sure of it.
</p>
<div class="row">
    <div id="spotted_container">
        <script id="spotted_template" type="x-tmpl-mustache">
            <div class="col-md-3">
                <a href="#" class="thumbnail" data-toggle="modal" data-target="#lightbox" onclick="spottedLightbox(this)"> 
                    <img src="{{photo_url_abs}}" alt="{{description}}" title="{{name}}" class="width_100" >
                </a>
            </div>
        </script>
    </div>
    <div class="clearfix"></div>
</div>
<script>
    $(document).ready(function() {
        loadMallDataCached(renderAll); 
    })
    function renderAll(){
        var repoList = getRepoList();
        renderSpotted('#spotted_container', '#spotted_template', repoList);
        
        $(".loading_overlay").hide();
        $("#page_content").show();
    }
    function renderSpotted(container, template, repo){
        var item_list = [];
        var item_rendered = [];
        var template_html = $(template).html();
        Mustache.parse(template_html);
    
        $.each( repo , function( key, val ) {
            if( val.name == "spotted"){
                $.each( val.images , function( key, val ) {
                    item_list.push(val);
                });
            }
        });
        $.each( item_list , function( key, val ) {
            console.log(val)
            var rendered = Mustache.render(template_html,val);
            item_rendered.push(rendered);
        });
        $(container).show();
        $(container).html(item_rendered.join(''));
        
        
    }
    
</script>